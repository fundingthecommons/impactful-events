#!/usr/bin/env sh

echo "ğŸš€ Running comprehensive checks before push..."

# Run the complete form test suite
echo "ğŸ§ª Running comprehensive form test suite..."
./scripts/test-form.sh

if [ $? -ne 0 ]; then
    echo "âŒ Comprehensive form tests failed! Fix issues before pushing."
    echo "Run './scripts/test-form.sh' for detailed results."
    exit 1
fi

# Run build check to ensure deployment readiness
echo "ğŸ—ï¸ Validating build for deployment..."
SKIP_ENV_VALIDATION=1 bun run build

if [ $? -ne 0 ]; then
    echo "âŒ Build failed! Fix build issues before pushing."
    exit 1
fi

echo "âœ… All checks passed! Safe to push to remote."